#summary Spinning up multiple instances of Snort/Suricata and Bro using PF_RING

= Setup =

Setup will automatically ask you how many PF_RING instances you'd like for Snort/Suricata and Bro (assuming
you choose Advanced Setup and you have multiple cores) and will tell you
how to adjust after the fact.

= Tuning =

If you want to change the number of PF_RING instances after running Setup, you can do the following.

== Snort/Suricata ==

  * Stop sensor processes:
{{{
sudo nsm_sensor_ps-stop
}}}
  * Edit {{{/etc/nsm/$HOSTNAME-$INTERFACE/sensor.conf}}} and change IDS_LB_PROCS to desired number of cores.
  * Start sensor processes:
{{{
sudo nsm_sensor_ps-start
}}}

If running Snort, the script automatically spawns $IDS_LB_PROCS instances
of Snort (using PF_RING), barnyard2, and snort_agent.<br>
If running Suricata, the script automatically copies $IDS_LB_PROCS into
suricata.yaml and then Suricata spins up the PF_RING instances itself.

== Bro ==
For Bro, you would do the following:
{{{
sudo broctl stop
# edit /opt/bro/etc/node.cfg and change the lb_procs variable, then do:
sudo broctl install && sudo broctl start
}}}

= Bro 2.1 with multiple interfaces =
Bro 2.1 is unable to monitor multiple interfaces with PF_RING.  This issue has been resolved in Bro 2.2.

= Updating =
Please see the [Upgrade Update] page for notes on updating the PF_RING kernel module.