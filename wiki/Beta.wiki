#summary Security Onion 12.04 Beta

= Introduction =

Security Onion 12.04 Beta is now available and ready for testing!  Thanks to everybody who has helped get us this far!

All of our packages are in an Ubuntu Launchpad PPA.  That means you can start with your preferred flavor of Ubuntu 12.04, add our PPA and packages, and be up and running in just a few minutes!

= Warning! =
Please keep in mind that this is not ready for production usage yet.  We're still in BETA and I reserve the right to break all the packages in the "test" repo at any time!

= RAM Minimum Requirements =
512MB - 1GB RAM for the core OS (512MB for Ubuntu Server with no GUI)<br>
+512MB RAM for the server components (apache, sguild, Snorby, ELSA web, etc.)<br>
+1GB RAM for EACH network interface that you choose to monitor <br>
+ >=512MB RAM if you choose to enable ELSA 

= Hardware Recommendations =
  * 64-bit<br>
  * Intel NICs<br>
  * as much RAM as your server holds!<br>
  * as much Disk as your server holds!<br>

=Ubuntu 12.04 vs Ubuntu 12.10=
Ubuntu 12.04 is an LTS (Long Term Support) release and is fully tested/supported for Security Onion.<br>

Ubuntu 12.10 is NOT an LTS release and is NOT tested/supported for Security Onion.

= Installation Instructions =

  * Please read these instructions CAREFULLY and follow them EXACTLY.  Commands have been formatted for easy copy/paste to avoid typos.
  * Download your desired flavor of Ubuntu 12.04.  You should be able to use 32-bit or 64-bit, but 64-bit is highly recommended (assuming your hardware supports it):
   * Ubuntu Server (no GUI)- http://www.ubuntu.com/download/server
   * Ubuntu Desktop - http://www.ubuntu.com/download/desktop
   * Kubuntu - http://www.kubuntu.org/getkubuntu/download
   * Xubuntu - http://xubuntu.org/getxubuntu/
   * Lubuntu - https://help.ubuntu.com/community/Lubuntu/GetLubuntu
  * Verify the checksum of the downloaded ISO image.
  * Boot the ISO image.
  * Proceed through the Ubuntu installer.  If prompted to select additional packages, only choose openssh-server (specifically do NOT choose MySQL).  Our packages will automatically install any dependencies later.
  * Reboot into your new installation.
  * If you installed a GUI, login using the username/password you specified in the Ubuntu installer.  If you installed Ubuntu Server (no GUI), you'll want to SSH into your new installation from another machine (with an X server) using the -X option to enable X-Forwarding:
{{{
ssh -X username@ip.of.securityonion.server
}}}
  * IMPORTANT! Apply any available Ubuntu updates (including new kernel packages) and reboot (this is required for the pf_ring DKMS module to build properly):
{{{
sudo apt-get update && sudo apt-get dist-upgrade && sudo reboot
}}}
  * If you're running a VM, now would be a good time to snapshot it so you can revert later if you need to.
  * Tell MySQL not to prompt for root password: 
{{{
echo "debconf debconf/frontend select noninteractive" | sudo debconf-set-selections  
}}}
  * Add our test repo and install ALL packages.  This could take 15 minutes or more depending on your CPU/Internet: 
{{{
sudo apt-get -y install python-software-properties
sudo add-apt-repository -y ppa:securityonion/test
sudo apt-get update
sudo apt-get -y install securityonion-all 
}}}
  * If you got any errors when installing the Security Onion packages, did you pay attention to the previous step marked IMPORTANT?  You may need to update your kernel and reboot to get the pf_ring kernel module to build correctly:
{{{
sudo apt-get update && sudo apt-get dist-upgrade && sudo reboot
}}}
  * Run the Setup wizard (if you get a zenity Gtk-WARNING, then you need to make sure you used "ssh -X" to enable X-Forwarding):
{{{
sudo sosetup
}}}
  * Follow the prompts in the Setup wizard!
  * Once you've completed the Setup wizard, open the Chromium web browser and go to https://localhost for links to Squert, Snorby, and ELSA.
  * To launch the Sguil client, find the icon in the Security Onion menu (Xubuntu/Lubuntu) or just type:
{{{
sguil.tk
}}}

= Metapackages =
The instructions above used the securityonion-all metapackage to install ALL of our individual packages (about 350MB).  We have some more focused metapackages that you can use for a more focused deployment:
  * securityonion-client (about 50MB)
  * securityonion-sensor (about 50MB)
  * securityonion-elsa and securityonion-elsa-extras (about 50MB)
  * securityonion-server (about 200MB)

= Known Issues =

===pf_ring DKMS module===
If you forgot to run the following command before installing our packages:
{{{
sudo apt-get update && sudo apt-get dist-upgrade && sudo reboot
}}}
then you could get into a situation where DKMS is unable to build your pf_ring kernel module because you're not running the most recent kernel.  This will result in cascading errors in our package installation.  The good news is it looks like if you then run that command, it should sort everything out:
{{{
sudo apt-get update && sudo apt-get dist-upgrade && sudo reboot
}}}
After the machine restarts, check to see if the pf_ring module got built and loaded correctly:
{{{
lsmod |grep pf_ring
}}}
If there is no output (the pf_ring module didn't get built/loaded), you can try reinstalling the pfring-module package:
{{{
sudo apt-get install --reinstall securityonion-pfring-module
}}}
If it still fails, perform a fresh installation and follows the steps at the top of the page exactly.

===add-apt-repository and proxies===
From Brian Sims:
"it doesn't look like add-apt-repository, as noted in the install instructions plays nice, by default, with http proxies.   With both the http_proxy environment variable configured as well as being in apt.conf (apt itself works, as does wget, etc), add-apt-respository eventually just fails with a cryptic "Error reading /securityonion/test/ubuntu: couldn't connect to host".    The repo is added to /etc/apt/sources.list.d, but the part that fails is the key retrieval.  Looks like a fairly common problem, solution seems to be to use apt-key afterwards, where you can specify a proxy as an argument on the command line, last argument is the SO keyid."
{{{
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --keyserver-options http-proxy="http://user:pass@foo.bar:3128" --recv-keys E1E6759023F386C7
}}}

===OSSEC Upgrade===
If you're currently testing the new Security Onion 12.04 Beta and installed the packages before October 4 and do an "apt-get upgrade", the OSSEC package may require some manual intervention: 
  * if prompted about /etc/ossec-init.conf, just press Enter to accept the default of "N, keep the current version" 
  * afterwards, if OSSEC isn't running, then you'll need to purge the package and reinstall it: 
{{{
sudo apt-get purge ossec-hids-server 
}}}
  * this will remove some securityonion metapackages, so let's reinstall them (and OSSEC):
{{{
sudo apt-get -y install securityonion-all 
}}}

===PRADS===
PRADS is a replacement for both PADS and SANCP.  Currently, PRADS does not capture the service banner like PADS used to:<br>
https://github.com/gamelinux/prads/issues/19<br>

===daemonlogger and netsniff-ng===
We still need to replace daemonlogger with netsniff-ng for higher performance.

===sphinxsearch===
There is a known issue with sphinxsearch (used by ELSA) not starting properly on boot.  As a quick-and-dirty bandaid until we have a proper fix, I modified my /etc/init.d/sphinxsearch as follows:<br>
changed the "start)" case to "oldstart)" and then made "start" a synonym for restart by changing:
{{{
restart|reload|force-reload) 
}}}
to:
{{{ 
start|restart|reload|force-reload) 
}}}

===ELSA===
The following ELSA issues are known and are being worked on:
  * GeoIP
  * Incorrect or missing parsers for Bro's dns.log, http.log, notice.log, capture_loss.log and software.log
  * UnixDate error message

===Bro path===
Bro binaries are in /opt/bro/bin/, which is not in your $PATH by default.  We'll be updating the $PATH variable in a future package.

===pcap_agent===
Sometimes the pcap_agent doesn't start correctly.

= Feedback =
If you have questions or problems, please send a detailed email to our TESTING mailing list (NOT our normal 10.04 mailing list):<br>
[MailingLists Security Onion Mailing Lists]