#summary Security Onion Installation Procedure

= Please read the following before downloading! =

= What's the recommended procedure for installing Security Onion? =

- If you're just evaluating Security Onion, the short answer is:<br>
  # Hardware requirements: you might be able to get by with 512MB RAM, but you really need 1GB or more.  Be aware that full packet capture may fill your disk quickly, so size your storage appropriately.<br>
  # <a href="http://sourceforge.net/projects/security-onion/files/">Download</a>, verify, and boot the ISO image.<br>
  # Run through the Xubuntu installer.<br>
  # Reboot into your new installation and double-click the Setup shortcut.  Follow the prompts.<br>
  # Analyze alerts using Sguil, Squert, or Snorby.<br>
<br>
- If you're going to be deploying Security Onion in production, the longer answer is as follows:<br>
<br>
  # Before you start, make sure your sensor(s) are capable.  First, make sure that you have sufficient RAM.  You should plan on a bare minimum of 1GB RAM for each interface that you're monitoring.  If you're buying a new server, go ahead and get 16GB RAM or more (it's cheap!).  Second, you need lots of storage as Security Onion does full packet capture and it can fill a disk quickly.  We have an hourly cronjob that purges old pcaps once the disk reaches 90% capacity.  However, if you have a small disk and/or are monitoring a large amount of traffic, you may fill that last 10% before the next hourly purge.  Additionally, the purge scripts are designed with the idea that you want to keep at LEAST 1 day's worth of full packet capture on disk, so they won't delete any pcaps with today's date on them.  For example, suppose you are monitoring a 50 Mb/s link, here are some quick calculations: 50Mb/s  = 6.25 MB/s = 375 MB/minute = 22,500 MB/hour = 540,000 MB/day.  So you're going to need about 540GB for one day's worth of pcaps (multiply this by the number of days you want to keep on disk for investigative/forensic purposes).  Note that this is just pcaps (other logs will take up additional storage), so you may want to round up to the next terabyte to ensure sufficient storage.  The more disk space you have, the more log retention you'll have for doing investigations after the fact. Disk is cheap, get all you can!<br>
  # <a href="http://sourceforge.net/projects/security-onion/files/">Download the most recent Security Onion ISO image from here</a> (you may have to scroll to the bottom of the page).<br>
  # Verify the MD5 and/or SHA1 checksums of the downloaded ISO image. There is an accompanying .md5 file or you can use the MD5/SHA1 checksums that Sourceforge displays when clicking the Information button.<br>
  # (If deploying a master server and one or more slave sensors, you'll need to perform the remaining steps on the server and all sensors, but make sure you install/configure the master first.)<br>
  # Boot the ISO and select Install (either from the boot menu or from the Live desktop).<br>
  # Follow the prompts in the installer.  When asked about partitioning, there are a few things to keep in mind:
    * If you have more than 2TB of disk space, you will probably want to create a dedicated /boot partition at the beginning of the disk to ensure that you don't have any Grub booting issues.  
    * You may want to put /nsm on a dedicated partition/disk and assign a good amount of disk space since it will be storing full packet captures.  
  # Reboot into your new installation and login with the credentials you specified in the installer.<br>
  # <a href="http://code.google.com/p/security-onion/wiki/NetworkConfiguration">Configure networking.</a><br>
  # If you're behind a proxy, <a href="http://code.google.com/p/security-onion/wiki/Proxy">configure your proxy settings</a>.<br>
  # If your machine has more than 4GB of RAM, <a href="https://help.ubuntu.com/community/EnablingPAE">install the PAE kernel</a>.<br>
  # Install Ubuntu updates using the Update Manager in the upper right corner and reboot if necessary.  <a href="http://code.google.com/p/security-onion/wiki/tcl">tcl/tk updates are on hold and you should NOT attempt to manually install any tcl/tk updates!</a>  You may want to <a href="https://help.ubuntu.com/community/AutomaticSecurityUpdates">configure Ubuntu to automatically install updates</a>.  <br>
  # <a href="http://code.google.com/p/security-onion/wiki/Upgrade">Install Security Onion updates</a>.<br>
  # Double-click the Setup shortcut on the Desktop and follow the prompts.  If this is a sensor that will report to a master server, then Setup will prompt you for an SSH account on the master server that has sudo privileges.  Consider creating a separate SSH account on the master server for each sensor so that if a sensor is ever compromised, its individual account can be disabled without affecting the other sensors.<br>
  # If you're monitoring IP address ranges other than the private RFC1918 address space (192.168.0.0/16,10.0.0.0/8,172.16.0.0/12), you should update your sensor configuration with the correct IP ranges.  Sensor configuration files can be found in /etc/nsm/HOSTNAME-INTERFACE/.  Modify either snort.conf or suricata.yaml (depending on which IDS engine you chose during Setup) and update the HOME_NET variable.  Also update sancp.conf and pads.conf.  Then update Bro's network configuration in /usr/local/etc/networks.cfg.  Finally, restart the sensor processes:
{{{
sudo nsm_sensor_ps-restart
}}}
  # If you have Internet access, create an IDS alert by typing the following at a terminal:<br>
{{{
curl http://testmyids.com
}}}
  # Full-time analysts should run Security Onion in a VM on their workstation, then launch the Sguil client and connect to the IP/hostname of their production Sguil sensor.  This allows you to investigate pcaps without fear of impacting your production server/sensors.  To change the resolution of your Security Onion VM, install the Virtual Tools for your virtualization solution or use xrandr.  For a list of available screen resolutions, simply execute "xrandr".  To set the screen resolution (replace W and H with the actual Width and Height desired):
{{{
xrandr -s WxH
}}}
  # Login to Sguil, Squert (https://server/squert/), or Snorby (https://server:3000) and review your IDS alerts.  Use the additional NSM data types in Sguil and Bro logs (/nsm/bro/logs/) for in-depth analysis.<br>
  # Optional: add new Sguil user accounts with the following:<br>
{{{
sudo /usr/local/sbin/nsm_server_user-add
}}}
  # Optional: if you'd like to configure email for alerting and reporting, please see:<br>
[Email]