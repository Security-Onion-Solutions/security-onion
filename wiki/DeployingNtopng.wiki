#summary Deploying Ntopng on SO.

= Introduction =

How to install and get started with Ntopng on a Security Onion box

= Author =

This page was written by Kevin Branch.

= No Support =

Since ntopng is not an official part of Security Onion, we don't provide official support for it.

= Details =

{{{
# Ntopng depends on this package
apt-get install redis-server rrdtool

# Get the latest ntopng deb packages from http://www.nmon.net
DEB_FILE_1=`curl -s http://www.nmon.net/packages/ubuntu/12.04/x64/ntopng/ 2>&1 | grep ntopng_ | tail -n1 | cut -d\" -f8`
DEB_FILE_2=`curl -s http://www.nmon.net/packages/ubuntu/12.04/all/ntopng-data/ 2>&1 | grep ntopng-data | tail -n1 | cut -d\" -f8`
wget http://www.nmon.net/packages/ubuntu/12.04/x64/ntopng/$DEB_FILE_1
wget http://www.nmon.net/packages/ubuntu/12.04/all/ntopng-data/$DEB_FILE_2
dpkg -i $DEB_FILE_1 
dpkg -i $DEB_FILE_2

# Make ntopng start at boot
touch /etc/ntopng/ntopng.start

# Set up an ntopng data directory
mkdir /usr/local/ntopng
chown nobody:root /usr/local/ntopng

# Edit /etc/ntopng/ntopng.conf, using the ntopng man page to figure out what options you want.
# You might start with something like this:
	--data-dir=/usr/local/ntopng
	--local-networks="192.168.0.0/16,10.0.0.0/8"
	--interface=eth1
	--dns-mode=1
	--disable-login
	--packet-filter="ip and not proto ipv6 and not ether host ff:ff:ff:ff:ff:ff and not net (224.0.0.0/8 or 239.0.0.0/8)"
	--daemon
	-G=/var/tmp/ntopng.pid
# Make sure to include at least the -G line in the above example exactly as seen, as the ntopng control script will fail without it.

# Open the ntopng web listener port in iptables
ufw allow 3000/tcp

# Manually start the service
service ntopng start

# Surf to http://NSM_HOST_NAME:3000 and try out your new ntopng installation!
}}}